(()=>{var X=Object.defineProperty;var U=d=>X(d,"__esModule",{value:!0});var V=(d,_)=>{U(d);for(var f in _)X(d,f,{get:_[f],enumerable:!0})};var G={};V(G,{default:()=>M});var{applyCSS:W}=__ALEPH__.pack["https://deno.land/x/aleph@v0.3.0-beta.19/framework/core/style.ts"],Z='*{margin:0;padding:0;border:none;outline:none;font:inherit;font-size:100%;vertical-align:baseline;background:transparent}body{font-family:"Helvetica Neue",Helvetica,Arial,sans-serif;font-size:16px}[is=cgol-parameter-box]{display:flex;flex-direction:column;border:1px solid #000000}[is=cgol-parameter-box]:not([open]){position:-webkit-sticky;position:sticky;top:0}[is=cgol-operation-box]{display:flex;flex-direction:column;border:1px solid #000000}[is=cgol-operation-box]:not([open]){position:-webkit-sticky;position:sticky;bottom:0}[is=cgl-board]{display:grid;gap:1px}[is=cgl-board] [is=cgl-cell]{border-radius:50%;background-color:#0ff}[is=cgl-board] [is=cgl-cell][data-live]{background-color:#ff1493}';W("/style/conways_game_of_life.css",{css:Z});var{default:ee,forwardRef:te,useEffect:ne,useImperativeHandle:ae,useRef:re,useState:le}=__ALEPH__.pack["https://esm.sh/react@17.0.2"],oe=te(function({x:d,y:_,life:f},S){let[s,p]=le(f!=null?f:!1),m=re(null);function t(){m.current.hasAttribute("data-live")?p(!1):p(!0)}return ne(()=>{},[s]),ae(S,()=>({alive:()=>s,next:y=>{switch(!0){case(!s&&y===3):p(!0);break;case(s&&(y===2||y===3)):break;case(s&&y<=1):p(!1);break;case(s&&4<=y):p(!1);break}}}),[s]),ee.createElement("div",{is:"cgl-cell","data-x":d,"data-y":_,"data-live":s?!0:null,ref:m,onClick:()=>t()})}),Y=oe;var{default:z,createRef:ce,forwardRef:se,useEffect:O,useImperativeHandle:ie,useRef:q,useState:j}=__ALEPH__.pack["https://esm.sh/react@17.0.2"],{nanoid:ue}=__ALEPH__.pack["https://deno.land/x/nanoid@v3.0.0/mod.ts"],fe=se(function({defaultX:d=32,defaultY:_=32,defaultScale:f=100,loadEventListener:S=[]},s){let[p,m]=j({x:d,y:_,alivemap:Array(d*_).fill(!0)});O(()=>{S.forEach(n=>n())});let[t,y]=j(d),[c,F]=j(_),i=q(null),[o,h]=j(f),g={gridTemplateColumns:`repeat(${t}, 1fr)`,height:"1px",width:"1px"};O(()=>{i.current.style.gridTemplateColumns=`repeat(${t}, 1fr)`,i.current.style.height=`calc(min(95vh, 95vw) * ${(t<c?1:c/t)*(o/100)})`,i.current.style.width=`calc(min(95vh, 95vw) * ${(t>c?1:t/c)*(o/100)})`},[t,c,o]);let E=0,C=[],x=q([]);x.current=Array(t*c).fill(null).map((n,a)=>x.current[a]||ce());let w=Array(t*c).fill(null,0,t*c).map((n,a)=>{let r=Number(a%t),u=(a-a%t)/t;return z.createElement(Y,{x:r,y:u,life:r>=p.x||u>=p.y?!1:p.alivemap[p.x*u+r],key:ue(),ref:x.current[a]})});return ie(s,()=>({getStep:()=>E,setSize:(n,a)=>{m({x:t,y:c,alivemap:x.current.map(r=>r.current.alive())}),y(n),F(a)},setScale:n=>{m({x:t,y:c,alivemap:x.current.map(a=>a.current.alive())}),h(n)},setNextEventListener:n=>{C.push(n)},next:()=>{let n=x.current.map(r=>r.current),a=n.map((r,u)=>{let[b,v]=[u%t,(u-u%t)/t],H=[b];0<=b-1&&H.push(b-1),b+1<t&&H.push(b+1);let A=[v];return 0<=v-1&&A.push(v-1),v+1<c&&A.push(v+1),H.reduce((I,N)=>A.reduce((P,T)=>{let B=T*t+N;return u==B?P:P+(n[B].alive()?1:0)},I),0)});n.forEach((r,u)=>{r.next(a[u])}),E++,C.forEach(r=>r(E))}}),[t,c,o,E,x]),z.createElement(z.Fragment,null,z.createElement("div",{is:"cgl-board",style:g,ref:i},w))}),D=fe;var{default:pe}=__ALEPH__.pack["https://deno.land/x/aleph@v0.3.0-beta.19/framework/react/components/Head.ts"],{default:me}=__ALEPH__.pack["https://deno.land/x/aleph@v0.3.0-beta.19/framework/react/components/StyleLink.ts"],{default:e,forwardRef:$,useEffect:J,useImperativeHandle:K,useRef:k,useState:L}=__ALEPH__.pack["https://esm.sh/react@17.0.2"];function M({pageProps:d}){let _=[],f=64,S=32,s=k(null),p=k(null),m=k(null),t=k(null);J(()=>{t.current.setSize(f,S)},[]);let y=$(({defaultX:i,defaultY:o,defaultSec:h,defaultScale:g,setSize:E,setBScale:C},x)=>{let[w,n]=L(i),a=k(null),[r,u]=L(o),b=k(null);function v(){try{let l=parseInt(a.current.value),R=parseInt(b.current.value);l&&R&&(n(l),u(R),E(l,R))}catch(l){console.error({exce:l})}}let[H,A]=L(h),I=k(null);function N(){try{let l=parseInt(I.current.value);l&&(A(l),s.current.setSec(l))}catch(l){console.error({exce:l})}}let[P,T]=L(g),B=k(null);function Q(){try{let l=parseInt(B.current.value);l&&(T(l),C(l))}catch(l){console.error({exce:l})}}return K(x,()=>({setSize:(l,R)=>{n(l),u(R)}}),[w,r]),e.createElement("details",{is:"cgol-parameter-box",open:!0},e.createElement("summary",null,"parameter"),e.createElement("label",{htmlFor:"boardx"},"x : ",w),e.createElement("input",{id:"boardx",type:"range",min:8,max:128,step:8,value:w,ref:a,onChange:v}),e.createElement("label",{htmlFor:"boardy"},"y : ",r),e.createElement("input",{id:"boardy",type:"range",min:8,max:128,step:8,value:r,ref:b,onChange:v}),e.createElement("label",{htmlFor:"boardsec"},"auto speed : ",H),e.createElement("input",{id:"boardsec",type:"range",min:1,max:5,step:1,value:H,ref:I,onChange:N}),e.createElement("label",{htmlFor:"boardscale"},"scale : ",P),e.createElement("input",{id:"boardscale",type:"range",min:25,max:1e3,step:25,value:P,ref:B,onChange:Q}))}),c=$(({},i)=>{let[o,h]=L(0);return _.push(()=>{m.current.setNextEventListener(g=>{h(g)})}),e.createElement(e.Fragment,null,e.createElement("div",null,"step : ",o))}),F=$(({},i)=>{let[o,h]=L(!1),[g,E]=L(3);J(()=>{let n=o,a=0;if(o){let r=()=>{m.current.next(),n&&(a=setTimeout(r,g*1e3))};r()}return()=>{n=!1,a&&clearTimeout(a)}},[o,g]);function C(){m.current.next()}function x(){h(!0)}function w(){h(!1)}return K(i,()=>({setSec:n=>{E(n)}}),[g]),e.createElement("details",{is:"cgol-operation-box",open:!0},e.createElement("summary",null,"operation"),e.createElement("input",{id:"boardnext",type:"button",value:"\u6B21\u4E16\u4EE3\u3078",onClick:C}),e.createElement("input",{id:"boardautostart",type:"button",value:o?"\u81EA\u52D5\u5B9F\u884C\u306E\u505C\u6B62":"\u81EA\u52D5\u5B9F\u884C\u306E\u958B\u59CB",onClick:o?w:x}))});return e.createElement("div",null,e.createElement(pe,null,e.createElement("title",null,"Conway's Game of Life"),e.createElement(me,{rel:"stylesheet",href:"/style/conways_game_of_life.css"})),e.createElement("h1",null,"Conway's Game of Life"),e.createElement(y,{defaultX:f,defaultY:S,defaultSec:3,defaultScale:100,setSize:(i,o)=>{m.current.setSize(i,o)},setBScale:i=>{m.current.setScale(i)},ref:t}),e.createElement("div",null,e.createElement(D,{defaultX:f,defaultY:S,defaultScale:100,ref:m,loadEventListener:_})),e.createElement(c,{ref:p}),e.createElement(F,{ref:s}))}__ALEPH__.pack["/pages/conways_game_of_life.tsx"]=G;})();
